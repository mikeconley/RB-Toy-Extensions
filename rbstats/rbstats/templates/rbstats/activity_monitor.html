<script type="text/javascript" language="Javascript">

RBStats = {};
alert('{{review_request_id}}');
RBStats.ext_id = "rbstats.extension.RBStatsExtension";
RBStats.ext_api_root = SITE_ROOT + "api/extensions/" + RBStats.ext_id + "/";
RBStats.activity_resource = "reviewing-session"
RBStats.wait_time = 3000;
RBStats.saw_activity = false;
RBStats.ping_in_progress = false;


RBStats.on_activity = function(event) {
    RBStats.saw_activity = true;
}

RBStats.ping = function() {
    if(RBStats.ping_in_progress) {
        RBStats.msg('Ping already in progress - skipping...');
    }
    if(RBStats.saw_activity) {
        RBStats.msg('Ping!');
    }
    RBStats.reset();
}

RBStats.msg = function(msg) {
    if(typeof(console) != 'undefined') {
        console.log(msg);
    }
}

RBStats.reset = function() {
    RBStats.saw_activity = false;
    setTimeout(RBStats.ping, RBStats.wait_time);
}

RBStats.boot = function() {
    $(document.body).mousemove(RBStats.on_activity);
    RBStats.reset();
}

RBStats.boot();

</script>
